{% extends "base/base.html" %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <script src="https://unpkg.com/htmx.org@1.9.3" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>

{% block extra_css %}
<link rel="stylesheet" href="{% static 'dist/leaflet.css' %}"/>
<script src="{% static 'dist/leaflet.js' %}"></script>
<link rel="stylesheet" href="{% static 'estilocss/index.css' %}">
{% endblock %}

{% block contenido %}

<!-- Portada -->
<div style="position: relative; width: 100%; height: 100vh; overflow: hidden;">
  <!-- Imagen de fondo -->
  <img src="{% static 'portada2.jpg' %}" 
       style="width: 100%; height: 100%; object-fit: cover;">

  <!-- Olas animadas -->
  <svg class="hero-waves" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" preserveAspectRatio="none" 
       style="position:absolute; bottom:0; width:100%; height:200px;">
    <defs>
      <!-- Path seamless para la ola -->
      <path id="wave-path" d="M0,160 C360,200 1080,120 1440,160 L1440,320 L0,320 Z"></path>
    </defs>

    <!-- Olas superpuestas -->
    <g class="wave wave1">
      <use xlink:href="#wave-path" x="0" y="0" fill="rgba(255,255,255,0.7)"></use>
      <use xlink:href="#wave-path" x="1440" y="0" fill="rgba(255,255,255,0.7)"></use>
      <use xlink:href="#wave-path" x="2880" y="0" fill="rgba(255,255,255,0.7)"></use>
    </g>

    <g class="wave wave2">
      <use xlink:href="#wave-path" href="#wave-path" x="0" y="20" fill="rgba(255,255,255,0.5)"></use>
      <use xlink:href="#wave-path" href="#wave-path" x="1440" y="20" fill="rgba(255,255,255,0.5)"></use>
    </g>

    <g class="wave wave3">
      <use xlink:href="#wave-path" x="0" y="40" fill="#ffffff"></use>
      <use xlink:href="#wave-path" x="1440" y="40" fill="#ffffff"></use>
    </g>

  </svg>

  <!-- Icono -->
  <svg id="action-help" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <path id="qMark" d="M10 19h3v3h-3v-3m2-17c5.35.22 7.68 5.62 4.5 9.67-.83 1-2.17 1.66-2.83 2.5C13 15 13 16 13 17h-3c0-1.67 0-3.08.67-4.08.66-1 2-1.59 2.83-2.25C15.92 8.43 15.32 5.26 12 5a3 3 0 0 0-3 3H6a6 6 0 0 1 6-6z"></path>
    </defs>
    <use xlink:href="#qMark"/>
  </svg>



  <!-- Contenido centrado -->
  <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; text-align: center;">
    <h1 class="animated-title" data-text="Bienvenido a la era TI">
      Bienvenido a la era TI
    </h1>
    <p style="font-size: 1.5rem; text-shadow: 1px 1px 3px rgba(0,0,0,0.7);">
      Monitoreo de agua inteligente
    </p>
  </div>
</div>

<!-- Sección About -->
<section id="acerca" style="margin-bottom: 50px;" class="about section about-bg">
<div class="container description-section" style="margin-bottom: 50px;">
  <div class="row align-items-xl-center gy-5">

    <!-- Columna izquierda -->
    <div class="col-xl-5 left-box">
      <div class="icon-box rounded bg-light p-4 shadow-sm">
        <h2>Dispositivo de Monitorización de Agua Inteligente</h2>
        <p style="text-align: justify;">
          HidroNet es un dispositivo electrónico diseñado para monitorear el consumo de agua en tiempo real proporcionando datos precisos y detallados.
        </p>
        <p style="text-align: justify;">
          Mide el consumo de agua en metros cúbicos y ofrece un historial detallado de los consumos, facilitando la toma de decisiones informadas para un uso más eficiente del recurso.
        </p>
      </div>
    </div>

    <!-- Columna derecha -->
    <div class="col-xl-7" style="margin-bottom: 100px;">
      <div class="row gy-4 icon-boxes">

        <div class="col-md-6 icon-box-right">
          <div class="icon-box rounded bg-light p-4 shadow-sm">
            <i class="bi bi-collection-play"></i>
            <h3>Usos del Dispositivo</h3>
            <p style="text-align: justify;">
              HidroNet permite la medición <strong>en tiempo real</strong> tanto en hogares como en instalaciones agrícolas, asegurando un control preciso del consumo de agua.
            </p>
          </div>
        </div>

        <div class="col-md-6 icon-box-right">
          <div class="icon-box rounded bg-light p-4 shadow-sm">
            <i class="bi bi-clipboard-check"></i>
            <h3>Historial de Consumo</h3>
            <p style="text-align: justify;">
              HidroNet genera un historial completo del consumo de agua, permitiendo comparar los datos mensuales y detectar patrones o irregularidades en el uso.
            </p>
          </div>
        </div>

        <div class="col-md-6 icon-box-right">
          <div class="icon-box rounded bg-light p-4 shadow-sm">
            <i class="bi bi-cpu-fill"></i>
            <h3>Fácil Integración</h3>
            <p style="text-align: justify;">
              El dispositivo está diseñado para integrarse fácilmente en cualquier sistema de plomería, sin necesidad de modificaciones complicadas, adaptándose rápidamente al entorno.
            </p>
          </div>
        </div>

        <div class="col-md-6 icon-box-right">
          <div class="icon-box rounded bg-light p-4 shadow-sm">
            <i class="bi bi-database-check"></i>
            <h3>Visualización de Datos</h3>
            <p style="text-align: justify;">
              HidroNet ofrece una visualización clara de los datos de consumo, mostrando información detallada sobre los niveles de agua consumida en tiempo real.
            </p>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>

<div id="contenedor-mapa" style="
  position: relative;
  width: 100%;
  max-width: 900px;
  height: 500px;
  margin: 40px auto;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(0,0,0,0.25);
  display: flex;
  flex-direction: row;
  z-index: 0;
">

  <!-- Mapa -->
  <div id="mapa-sensores" style="flex: 1;"></div>

  <!-- Panel lateral -->
  <div id="sidebar-sensores" style="
    width: 300px;
    background: #ffffff;
    padding: 15px;
    box-shadow: -3px 0 8px rgba(0,0,0,0.2);
    overflow-y: auto;
  ">
    <h3 style="margin-top:0;">Mapa de Sensores</h3>
    <p>Haga clic en un sensor para ver sus datos.</p>
    <div id="sensor-info">Seleccione un sensor.</div>
    <canvas id="sensor-grafico" style="width:100%;height:200px;margin-top:15px;"></canvas>
  </div>
</div>
<div  class="container aos-init aos-animate" data-aos="fade-up" data-aos-delay="100">
  <div class="row gy-4">
    <div class="col-lg-12 d-flex flex-column justify-content-center">
      <h3 style="text-align: center; margin-bottom: 20px; margin-top: 20px;">Sobre Nosotros</h3>
    </div>
  </div>
</div>

<!-- Imagen + descripción -->
<div style="margin-bottom: 70px;" class="container description-section" style="margin-bottom: 50px;">
  <div class="row gy-4 align-items-center features-item">

    <!-- Imagen -->
    <div class="col-md-5 order-1 order-md-2 d-flex align-items-center">
      <div class="animated-bg">
        <img style="border-radius: 25px;" src="https://www.elteclado.com.ar/fotos/2023/03/22_porque-celebra-dia-mundial-agua.jpg" 
             class="img-fluid section-img" alt="Imagen Acerca de Nosotros">
        <div class="gradient-overlay "></div>
      </div>
    </div>

    <!-- Texto -->
    <div class="col-md-7 order-2 order-md-1 text-content">
      <h3>¿Quienes Somos?</h3>
      <p>
        Somos un emprendimiento tecnológico orientado a la innovación y a la sostenibilidad, enfocado en desarrollar soluciones 
        que promuevan el uso responsable de los recursos hídricos. 
        Nuestro objetivo principal es brindar a las familias y comunidades una herramienta moderna y 
        accesible que les permita conocer, controlar y optimizar su consumo de agua. Apostamos por la 
        integración de tecnologías IoT y plataformas web intuitivas, con el propósito de generar 
        conciencia ambiental y apoyar la gestión eficiente de un recurso vital para la humanidad.
      </p>
      <p>
        Nos caracterizamos por combinar el compromiso ambiental con la innovación tecnológica, 
        desarrollando herramientas que no solo facilitan la vida de los usuarios, 
        sino que también contribuyen al cuidado del planeta. Nuestro trabajo busca generar impacto positivo
        en los hogares y comunidades, entregando soluciones accesibles, confiables y adaptadas 
        a las necesidades actuales en torno al consumo de agua. Creemos firmemente que la tecnología 
        es un medio clave para fomentar hábitos responsables y construir un futuro más sostenible.
      </p>
      <p>
        Nuestro principal fin es ofrecer una solución innovadora y sostenible que permita a las personas 
        gestionar de manera eficiente su consumo de agua. Aspiramos a consolidarnos como un referente 
        en el uso de tecnologías aplicadas al cuidado de los recursos naturales, contribuyendo así al 
        bienestar de la sociedad y a la preservación de un recurso tan esencial como el agua.
      </p>
    </div>
  </div>
</div>

<div class="container" style="margin-bottom: 150px;">
  <h3 style="text-align: center;">¿Por qué elegir HidroNet?</h3>
  <div style="margin-bottom: 50px;"class="row gy-3">

    <!-- Columna 1 -->
    <div class="col-md-6 col-lg-4">
      <div class="icon-box rounded bg-light p-4 shadow-sm text-center h-100">
        <i class="bi bi-droplet text-primary icon1" style="font-size: 40px;"></i>
        <h3>Medición en Tiempo Real</h3>
        <p style="text-align: justify;">
          HidroNet ofrece mediciones precisas en tiempo real, permitiendo el monitoreo constante del consumo de agua sin importar la ubicación.
        </p>
      </div>
    </div>

    <!-- Columna 2 -->
    <div class="col-md-6 col-lg-4">
      <div class="icon-box rounded bg-light p-4 shadow-sm text-center h-100">
        <i class="bi bi-bar-chart-line text-primary icon2" style="font-size: 40px;"></i>
        <h3>Historial Detallado</h3>
        <p style="text-align: justify;">
          Accede a un registro histórico detallado del consumo, lo que facilita la comparación entre diferentes periodos y el análisis de patrones de uso.
        </p>
      </div>
    </div>

    <!-- Columna 3 -->
    <div class="col-md-6 col-lg-4">
      <div class="icon-box rounded bg-light p-4 shadow-sm text-center h-100">
        <i class="bi bi-gear-fill text-primary icon3" style="font-size: 40px;"></i>
        <h3>Ajustes Personalizados</h3>
        <p style="text-align: justify;">
          El dispositivo permite configurar alertas y ajustes según las necesidades del usuario, optimizando el consumo de agua en función de los hábitos de uso.
        </p>
      </div>
    </div>
  </div>
</div>




<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<!-- ====== SCRIPT DEL MAPA ====== -->
<script>
  // --- Inicialización del mapa ---
  const map = L.map('mapa-sensores').setView([-35.5987, -71.7139], 15);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // --- Sensores simulados ---
  const sensores = [
    { id: 'S-001', nombre: 'Lado Norte', lat: -35.5987, lng: -71.7139 },
    { id: 'S-002', nombre: 'Riego Zona Sur', lat: -35.6003, lng: -71.7135 },
  ];

  // --- Funciones auxiliares ---
  function generarLectura() {
    return (Math.random() * 1.2 + 0.2).toFixed(2); // entre 0.20 y 1.40
  }

  const historicos = {
    'S-001': [0.8, 1.1, 0.9, 1.2, 1.0],
    'S-002': [0.7, 0.9, 0.8, 1.0, 0.85],
  };

  let grafico = null;

  function crearGrafico(sensor) {
    const ctx = document.getElementById('sensor-grafico');
    if (grafico) grafico.destroy();
    const datos = historicos[sensor.id] || [0.5, 0.5, 0.5, 0.5, 0.5];
    const dias = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes'];

    grafico = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: dias,
        datasets: [{
          label: `${sensor.nombre} (${sensor.id})`,
          data: datos,
          backgroundColor: 'rgba(54, 162, 235, 0.6)',
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: true, position: 'bottom' },
          title: {
            display: true,
            text: 'Consumo semanal estimado (L/s)'
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            suggestedMax: 1.5
          }
        }
      }
    });
  }

  function actualizarPanel(sensor) {
    const valor = generarLectura();
    document.getElementById('sensor-info').innerHTML = `
      <div>
        <h4>${sensor.nombre}</h4>
        <p><b>ID:</b> ${sensor.id}</p>
        <p><b>Lectura actual:</b> ${valor} L/s</p>
        <p><small>Última actualización: ${new Date().toLocaleTimeString()}</small></p>
      </div>
    `;
  }

  function mostrarInfo(sensor) {
    actualizarPanel(sensor);
    crearGrafico(sensor);
    if (window._intervalActualizacion) clearInterval(window._intervalActualizacion);
    window._intervalActualizacion = setInterval(() => {
      actualizarPanel(sensor);
    }, 2000);
  }

  // --- Marcadores ---
  sensores.forEach(s => {
    const marker = L.marker([s.lat, s.lng]).addTo(map);
    marker.bindPopup(`<strong>${s.nombre}</strong>`);
    marker.on('click', () => mostrarInfo(s));
  });
</script>
<!-- GSAP + ScrollTrigger -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

<script>
  gsap.registerPlugin(ScrollTrigger);
  

  // Animación columna izquierda
  gsap.from(".left-box", {
    x: -100,
    opacity: 0,
    duration: 1.2,
    ease: "power3.out",
    scrollTrigger: {
      trigger: ".left-box",
      start: "top 80%",
      toggleActions: "play none none reverse"
    }
  });

  // Animación icon-boxes derecha (cascada)
  gsap.from(".icon-box-right", {
    y: 50,
    opacity: 0,
    duration: 1,
    ease: "power2.out",
    stagger: 0.2, // retraso entre cada icon-box
    scrollTrigger: {
      trigger: ".icon-boxes",
      start: "top 80%",
      toggleActions: "play none none reverse"
    }
  });
  // Animación para la columna 1
  gsap.from(".icon1", {
    y: -100,
    rotation: -180,
    opacity: 0,
    duration: 1,
    scrollTrigger: {
      trigger: ".icon1",
      start: "top 80%", // cuando entra en viewport
      toggleActions: "play none none reverse"
    }
  });

  // Animación para la columna 2
  gsap.from(".icon2", {
    x: -100,
    scale: 0,
    opacity: 0,
    duration: 1,
    scrollTrigger: {
      trigger: ".icon2",
      start: "top 80%",
      toggleActions: "play none none reverse"
    }
  });

  // Animación para la columna 3
  gsap.from(".icon3", {
    y: 100,
    rotation: 360,
    opacity: 0,
    duration: 1,
    scrollTrigger: {
      trigger: ".icon3",
      start: "top 80%",
      toggleActions: "play none none reverse"
    }
  });
   gsap.registerPlugin(ScrollTrigger);

  // Imagen con zoom y slide
  gsap.from(".section-img", {
    x: -100,
    scale: 0.9,
    opacity: 0,
    duration: 1.2,
    ease: "power2.out",
    scrollTrigger: {
      trigger: ".section-img",
      start: "top 80%",
      toggleActions: "play none none reverse"
    }
  });

  // Texto secuencial
  gsap.from(".text-content h3, .text-content p", {
    y: 40,
    opacity: 0,
    duration: 0.8,
    stagger: 0.3, // va apareciendo uno tras otro
    ease: "power2.out",
    scrollTrigger: {
      trigger: ".text-content",
      start: "top 85%",
      toggleActions: "play none none reverse"
    }
  });
</script>

</section>
{% endblock %}

</body>
</html>
